{"ast":null,"code":"import * as d3 from 'd3'; // Add a couple useful utilities to reorder elements...\n\nd3.selection.prototype.moveToFront = function () {\n  return this.each(function () {\n    this.parentNode.appendChild(this);\n  });\n};\n\nd3.selection.prototype.moveToBack = function () {\n  return this.each(function () {\n    const firstChild = this.parentNode.firstChild;\n\n    if (firstChild) {\n      this.parentNode.insertBefore(this, firstChild);\n    }\n  });\n}; // ... and the important addition. ⬇️⬇️⬇️\n\n/**\n * appendSelect either selects a matching child element of your current\n * selection if one exists or appends that child and selects it. It's useful\n * for writing idempotent chart functions.\n *\n * Use it like this:\n *\n * selection.appendSelect(<query selector>)\n *\n * It can be chained like any normal d3 selection:\n *\n * const g = d3.select(myNode).appendSelect('g', 'viz-group');\n * g.appendSelect('rect')\n *   .attr('x', 0); etc.\n *\n * @param  {string} querySelector  String representation of element to be\n *                                 appended/selected, e.g., div.myClass, svg,\n *                                 button.myClass.anotherClass.\n * @return {object}     d3 selection of child element\n */\n\n\nd3.selection.prototype.appendSelect = function (querySelector) {\n  // Test querySlector w/ classes\n  if (!/^[a-zA-Z]+[0-9]?\\.-?[_a-zA-Z][_a-zA-Z0-9.-]*[a-zA-Z0-9]*$/.test(querySelector)) {\n    // Test querySelector just an element\n    if (!/^[a-zA-Z]+[0-9]?$/.test(querySelector)) {\n      throw new Error(`Invalid query selector passed to appendSelect. Must be an element with zero or more classes: \"div.myClass.another\". Got \"${querySelector}\".`);\n    }\n  }\n\n  const element = querySelector.split('.')[0];\n  const classes = querySelector.split('.').slice(1);\n  let selection = this.select(querySelector);\n  if (!selection.empty()) return selection;\n  selection = this.append(element);\n  classes.forEach(cls => selection.classed(cls, true));\n  return selection;\n};\n\nexport default d3;","map":null,"metadata":{},"sourceType":"module"}