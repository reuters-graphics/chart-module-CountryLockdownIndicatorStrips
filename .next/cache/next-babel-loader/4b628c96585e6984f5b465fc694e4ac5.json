{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\n/* eslint-disable no-trailing-spaces */\nimport ChartComponent from './base/ChartComponent';\nimport d3 from './utils/d3';\nimport { getDates, formatDateObject } from './utils/utils';\nimport defaultData from './defaultData.json';\nimport { interpolateHcl } from 'd3';\nimport d3SelectionMulti from 'd3-selection-multi'; // see docs on https://github.com/reuters-graphics/graphics-atlas-client\n// import AtlasMetadataClient from '@reuters-graphics/graphics-atlas-client';\n// const atlastClient = new AtlasMetadataClient();\n\nvar dateParse = d3.timeParse('%Y-%m-%d');\nvar dateFormat = d3.timeFormat('%b %e'); // const dateFormat_tt = d3.timeFormat('%B %e');\n// const numberFormat_tt = d3.format(',');\n\nvar CountryLockdownIndicatorStrips = /*#__PURE__*/function (_ChartComponent) {\n  _inherits(CountryLockdownIndicatorStrips, _ChartComponent);\n\n  var _super = _createSuper(CountryLockdownIndicatorStrips);\n\n  function CountryLockdownIndicatorStrips() {\n    var _this;\n\n    _classCallCheck(this, CountryLockdownIndicatorStrips);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"defaultProps\", {\n      dateSeries: ['2020-02-21', '2020-07-08'],\n      // yyyy-mm-dd format, end date not included\n      dataParams: {\n        date: 'date',\n        index: 'c1',\n        stepValue: 'flag',\n        steps: 2 // stepValue = 0, 1...\n\n      },\n      height: 150,\n      stripHeight: 50,\n      margin: {\n        top: 10,\n        right: 18,\n        bottom: 10,\n        left: 18\n      },\n      valign: 'center',\n      // start, center, baseline\n      baseColor: '#3B4252',\n      stripColor: {\n        // should be numeric values that are mapped from the data\n        0: '#4C566A',\n        1: '#948072',\n        2: '#f68e26',\n        3: '#de2d26'\n      },\n      legendItems: {\n        // should contain items from stripColor\n        \"null\": 'no data',\n        stepLegend: {\n          0: 'targeted',\n          1: 'nationwide'\n        },\n        indexLegend: {\n          0: 'no measures',\n          1: 'recommend closing',\n          2: 'require closing on some levels',\n          3: 'require closing all levels'\n        }\n      },\n      chartTitle: 'Lockdown measures',\n      axis: true,\n      markDates: ['2020-02-21', '2020-03-25', '2020-07-07'] // yyyy-mm-dddd\n\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"defaultData\", defaultData);\n\n    return _this;\n  }\n\n  _createClass(CountryLockdownIndicatorStrips, [{\n    key: \"draw\",\n    value: function draw() {\n      var allData = this.data();\n      var props = this.props();\n      var node = this.selection().node();\n\n      if (!props.dateSeries) {\n        props.dateSeries = [dateParse(allData[0].date), dateParse(allData[allData.length - 1].date)];\n      }\n\n      var dateSeries = getDates(props.dateSeries[0], props.dateSeries[1]);\n      console.log(dateSeries); // set data for the date series\n\n      var data = dateSeries.map(function (d) {\n        var match = allData.find(function (e) {\n          return e[props.dataParams.date] === formatDateObject(d);\n        });\n\n        if (match) {\n          return match;\n        } else {\n          var obj = {};\n          obj[props.dataParams.date] = formatDateObject(d);\n          return obj;\n        }\n      });\n      console.log(data); // get country details from AtlasClient from ISO-2\n      // props.country = atlastClient.getCountry(props.countryISO2);\n\n      var _node$getBoundingClie = node.getBoundingClientRect(),\n          width = _node$getBoundingClie.width;\n\n      var transition = d3.transition().duration(750);\n      var stripheight = props.legendItems ? props.stripHeight - props.margin.top : props.height - props.margin.top - props.margin.bottom; // set scales\n\n      var xScale = d3.scaleBand().domain(dateSeries).range([0, width - props.margin.left - props.margin.right]).padding(0);\n      var yScale = d3.scaleLinear().domain([0, props.dataParams.steps - 1]).range([stripheight, props.margin.top]);\n      var colorDomain = props.stripColor ? Object.keys(props.stripColor).map(function (d) {\n        return +d;\n      }) : d3.extent(data.map(function (d) {\n        return d[props.dataParams.index];\n      }));\n      var colorRange = props.stripColor ? colorDomain.map(function (d) {\n        return props.stripColor[\"\".concat(d)];\n      }) : ['#cccccc', '#333333'];\n      var colorScale = d3.scaleLinear().domain(colorDomain).range(colorRange).interpolate(interpolateHcl); // main chart container\n\n      var chartDiv = this.selection().appendSelect('div') // see docs in ./utils/d3.js\n      .attr('class', 'CountryLockdownIndicatorStrips').style('width', \"\".concat(width, \"px\")) // .style('height', `${props.height}px`)\n      .appendSelect('div').styles({\n        'padding-top': \"\".concat(props.margin.top, \"px\"),\n        'padding-right': \"\".concat(props.margin.right, \"px\"),\n        'padding-bottom': \"\".concat(props.margin.bottom, \"px\"),\n        'padding-left': \"\".concat(props.margin.left, \"px\")\n      }); // add chart title\n\n      if (props.chartTitle) {\n        chartDiv.appendSelect('div').attr('class', 'font-display chart-title').html(\"<h6>\".concat(props.chartTitle, \"</h6>\"));\n      } // make bars\n\n\n      var bars = chartDiv.appendSelect('div.bars-container').styles({\n        display: 'flex',\n        'align-items': \"\".concat(props.valign)\n      }).selectAll('.bar').data(data, function (d, i) {\n        return d[props.dataParams.date];\n      }); // for smooth data updation\n\n      bars.enter().append('div').attr('class', function (d) {\n        return \"bar \".concat(d[props.dataParams.date]);\n      }).style('display', 'inline-block').style('height', function (d) {\n        var stepSize = stripheight / props.dataParams.steps;\n        var step = d[props.dataParams.stepValue] + 1;\n        return d[props.dataParams.index] ? step ? step * stepSize + 'px' : stepSize + 'px' : stepSize + 'px';\n      }).style('width', xScale.bandwidth() + 'px').style('background', function (d) {\n        var val = parseFloat(d[props.dataParams.index]);\n        return val !== null && !isNaN(val) ? colorScale(val) : props.baseColor;\n      }).merge(bars).transition(transition).style('display', 'inline-block').style('height', function (d) {\n        var stepSize = stripheight / props.dataParams.steps;\n        var step = d[props.dataParams.stepValue] + 1;\n        return d[props.dataParams.index] ? step ? step * stepSize + 'px' : stepSize + 'px' : stepSize + 'px';\n      }).style('width', xScale.bandwidth() + 'px').style('background', function (d) {\n        var val = parseFloat(d[props.dataParams.index]);\n        return val !== null && !isNaN(val) ? colorScale(val) : props.baseColor;\n      });\n      bars.exit().transition(transition).attr('height', 0).remove(); // add axis\n\n      var markDates = props.markDates ? props.markDates.map(function (d) {\n        if (xScale(dateParse(d))) {\n          return dateParse(d);\n        }\n      }) : [dateSeries[0], dateSeries.slice(-1)[0]];\n      markDates = markDates.filter(function (d) {\n        return !isNaN(d);\n      }); // console.log(xScale(dateParse('2020-07-07')));\n\n      if (props.axis) {\n        var xAxis = chartDiv.appendSelect('svg').attr('width', width - props.margin.left - props.margin.right).attr('height', 25).attr('transform', 'translate(0, 0)');\n        xAxis.appendSelect('g.axis-x').attr('class', 'axis-x axis').transition(transition).attr('transform', 'translate(0,0)').call(d3.axisBottom(xScale).tickValues(markDates).tickFormat(dateFormat));\n      } // chart legend\n\n\n      if (props.legendItems) {\n        var indexLegendItems = [];\n        Object.keys(props.legendItems.indexLegend).forEach(function (d) {\n          var item = {\n            key: d,\n            value: props.legendItems.indexLegend[d]\n          };\n          indexLegendItems.push(item);\n        });\n\n        if (props.legendItems[\"null\"]) {\n          indexLegendItems.push({\n            key: 'null',\n            value: props.legendItems[\"null\"]\n          });\n        }\n\n        var legendWidth = (width - props.margin.right - props.margin.left) / indexLegendItems.length; // make legend\n\n        var legendDiv = chartDiv.appendSelect('div.legend-container');\n        var indexLegend = legendDiv.appendSelect('div.legend.indexLegend') // .style('align-items', `${props.valign}`)\n        .selectAll('.legend-item').data(indexLegendItems); // for smooth data updation\n\n        indexLegend.enter().append('div').attr('class', 'legend-item').styles({\n          display: 'flex',\n          'align-items': 'start'\n        }) // .style('width', `${legendWidth}px`)\n        .html(function (d) {\n          var color = +d.key !== null && !isNaN(+d.key) ? props.stripColor[+d.key] : props.baseColor;\n          return \"<span style=\\\"width:1rem; height:1rem;min-width:1rem; min-height:1rem; background: \".concat(color, \"\\\"></span> <p style=\\\"margin:0 0 0 0.5rem;\\\">\").concat(d.value, \"</p>\");\n        }).merge(indexLegend).styles({\n          display: 'flex',\n          'align-items': 'start'\n        }).style('width', \"\".concat(legendWidth, \"px\")).html(function (d) {\n          var color = +d.key !== null && !isNaN(+d.key) ? props.stripColor[+d.key] : props.baseColor;\n          return \"<span style=\\\"width:1rem; height:1rem;min-width:1rem; min-height:1rem; background: \".concat(color, \"\\\"></span> <p style=\\\"margin:0 0 0 0.5rem;\\\">\").concat(d.value, \"</p>\");\n        });\n        indexLegend.exit().transition(transition).remove();\n\n        if (props.legendItems.stepLegend) {\n          // step legend stuff\n          var stepLegendItems = [];\n          Object.keys(props.legendItems.stepLegend).forEach(function (d) {\n            var item = {\n              key: d,\n              value: props.legendItems.stepLegend[d]\n            };\n            stepLegendItems.push(item);\n          });\n          console.log(stepLegendItems);\n          var stepLegend = legendDiv.appendSelect('div.legend.stepLegend').selectAll('.legend-item').data(stepLegendItems); // for smooth data updation\n\n          stepLegend.enter().append('div').attr('class', 'legend-item').styles({\n            display: 'flex',\n            'align-items': 'center'\n          }).html(function (d, i) {\n            var stepSize = stripheight / stepLegendItems.length;\n            return \"<span style=\\\"width:\".concat(8, \"px; height:\", (+d.key + 1) * stepSize, \"px; background-color:\").concat(props.baseColor, \";\\\"></span><p style=\\\"margin:0 0 0 0.5rem;\\\">\").concat(d.value, \"</p>\");\n          }).merge(stepLegend).styles({\n            display: 'flex',\n            'align-items': 'center'\n          }).html(function (d, i) {\n            var stepSize = stripheight / stepLegendItems.length;\n            return \"<span style=\\\"width:\".concat(8, \"px; height:\", (+d.key + 1) * stepSize, \"px; background-color:\").concat(props.baseColor, \";\\\"></span><p style=\\\"margin:0 0 0 0.5rem;\\\">\").concat(d.value, \"</p>\");\n          });\n          stepLegend.exit().transition(transition).remove();\n        }\n      }\n\n      return this;\n    }\n  }]);\n\n  return CountryLockdownIndicatorStrips;\n}(ChartComponent); // console.log(this.defaultProps);\n\n\nexport default CountryLockdownIndicatorStrips;","map":{"version":3,"sources":["/Users/prasanta/ReutersWork/INTERACTIVES/COVID-APP/chart-module-CountryLockdownIndicatorStrips/src/lib/chart.js"],"names":["ChartComponent","d3","getDates","formatDateObject","defaultData","interpolateHcl","d3SelectionMulti","dateParse","timeParse","dateFormat","timeFormat","CountryLockdownIndicatorStrips","dateSeries","dataParams","date","index","stepValue","steps","height","stripHeight","margin","top","right","bottom","left","valign","baseColor","stripColor","legendItems","stepLegend","indexLegend","chartTitle","axis","markDates","allData","data","props","node","selection","length","console","log","map","d","match","find","e","obj","getBoundingClientRect","width","transition","duration","stripheight","xScale","scaleBand","domain","range","padding","yScale","scaleLinear","colorDomain","Object","keys","extent","colorRange","colorScale","interpolate","chartDiv","appendSelect","attr","style","styles","html","bars","display","selectAll","i","enter","append","stepSize","step","bandwidth","val","parseFloat","isNaN","merge","exit","remove","slice","filter","xAxis","call","axisBottom","tickValues","tickFormat","indexLegendItems","forEach","item","key","value","push","legendWidth","legendDiv","color","stepLegendItems"],"mappings":"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","sourcesContent":["/* eslint-disable no-trailing-spaces */\nimport ChartComponent from './base/ChartComponent';\nimport d3 from './utils/d3';\nimport { getDates, formatDateObject } from './utils/utils';\nimport defaultData from './defaultData.json';\nimport { interpolateHcl } from 'd3';\nimport d3SelectionMulti from 'd3-selection-multi';\n// see docs on https://github.com/reuters-graphics/graphics-atlas-client\n// import AtlasMetadataClient from '@reuters-graphics/graphics-atlas-client';\n// const atlastClient = new AtlasMetadataClient();\n\nconst dateParse = d3.timeParse('%Y-%m-%d');\nconst dateFormat = d3.timeFormat('%b %e');\n// const dateFormat_tt = d3.timeFormat('%B %e');\n// const numberFormat_tt = d3.format(',');\n\nclass CountryLockdownIndicatorStrips extends ChartComponent {\n    defaultProps = {\n      dateSeries: ['2020-02-21', '2020-07-08'], // yyyy-mm-dd format, end date not included\n      dataParams: {\n        date: 'date',\n        index: 'c1',\n        stepValue: 'flag',\n        steps: 2, // stepValue = 0, 1...\n      },\n      height: 150,\n      stripHeight: 50,\n      margin: {\n        top: 10,\n        right: 18,\n        bottom: 10,\n        left: 18,\n      },\n      valign: 'center', // start, center, baseline\n      baseColor: '#3B4252',\n      stripColor: { // should be numeric values that are mapped from the data\n        0: '#4C566A',\n        1: '#948072',\n        2: '#f68e26',\n        3: '#de2d26',\n      },\n      legendItems: { // should contain items from stripColor\n        null: 'no data',\n        stepLegend: {\n          0: 'targeted',\n          1: 'nationwide',\n        },\n        indexLegend: {\n          0: 'no measures',\n          1: 'recommend closing',\n          2: 'require closing on some levels',\n          3: 'require closing all levels',\n        },\n      },\n      chartTitle: 'Lockdown measures',\n      axis: true,\n      markDates: ['2020-02-21', '2020-03-25', '2020-07-07'], // yyyy-mm-dddd\n    };\n\n    defaultData = defaultData;\n\n    draw() {\n      const allData = this.data();\n      const props = this.props();\n      const node = this.selection().node();\n\n      if (!props.dateSeries) {\n        props.dateSeries = [dateParse(allData[0].date), dateParse(allData[allData.length - 1].date)];\n      }\n      const dateSeries = getDates(props.dateSeries[0], props.dateSeries[1]);   \n      console.log((dateSeries));\n\n      // set data for the date series\n      const data = dateSeries.map((d) => {\n        const match = allData.find((e) => (e[props.dataParams.date]) === (formatDateObject(d)));\n        if (match) {\n          return match;\n        } else {\n          const obj = {};\n          obj[props.dataParams.date] = formatDateObject(d);\n          return obj;\n        }\n      }); \n      console.log(data);\n      // get country details from AtlasClient from ISO-2\n      // props.country = atlastClient.getCountry(props.countryISO2);\n\n      const {\n        width,\n      } = node.getBoundingClientRect();\n\n      const transition = d3.transition()\n        .duration(750);\n\n      const stripheight = props.legendItems ? (props.stripHeight - props.margin.top) : (props.height - props.margin.top - props.margin.bottom);\n\n      // set scales\n  \n      const xScale = d3.scaleBand()\n        .domain(dateSeries)\n        .range([0, width - props.margin.left - props.margin.right])\n        .padding(0);\n\n      const yScale = d3.scaleLinear()\n        .domain([0, props.dataParams.steps - 1])\n        .range([stripheight, props.margin.top]);\n\n      const colorDomain = props.stripColor ? (Object.keys(props.stripColor)).map(d => +d) : d3.extent(data.map(d => d[props.dataParams.index]));\n  \n      const colorRange = props.stripColor ? colorDomain.map(d => props.stripColor[`${d}`]) : ['#cccccc', '#333333'];\n  \n      const colorScale = d3.scaleLinear()\n        .domain(colorDomain)\n        .range(colorRange)\n        .interpolate(interpolateHcl);\n\n      // main chart container\n      const chartDiv = this.selection()\n        .appendSelect('div') // see docs in ./utils/d3.js\n        .attr('class', 'CountryLockdownIndicatorStrips')\n        .style('width', `${width}px`)\n      // .style('height', `${props.height}px`)\n        .appendSelect('div')\n        .styles({\n          'padding-top': `${props.margin.top}px`,\n          'padding-right': `${props.margin.right}px`,\n          'padding-bottom': `${props.margin.bottom}px`,\n          'padding-left': `${props.margin.left}px`,\n        });\n\n      // add chart title\n      if (props.chartTitle) {\n        chartDiv.appendSelect('div')\n          .attr('class', 'font-display chart-title')\n          .html(`<h6>${props.chartTitle}</h6>`);\n      }\n\n      // make bars\n      const bars = chartDiv.appendSelect('div.bars-container')\n        .styles({\n          display: 'flex',\n          'align-items': `${props.valign}`,\n        })\n        .selectAll('.bar')\n        .data(data, (d, i) => d[props.dataParams.date]); // for smooth data updation\n\n      bars.enter().append('div')\n        .attr('class', d => `bar ${d[props.dataParams.date]}`)\n        .style('display', 'inline-block')\n        .style('height', d => {\n          const stepSize = (stripheight) / props.dataParams.steps;\n          const step = d[props.dataParams.stepValue] + 1;\n          return d[props.dataParams.index] ? (step ? step * stepSize + 'px' : stepSize + 'px') : stepSize + 'px';\n        })\n        .style('width', xScale.bandwidth() + 'px')\n        .style('background', d => {\n          const val = parseFloat(d[props.dataParams.index]);\n          return (val !== null) && !(isNaN(val)) ? colorScale(val) : props.baseColor;\n        })\n        .merge(bars)\n        .transition(transition)\n        .style('display', 'inline-block')\n        .style('height', d => {\n          const stepSize = (stripheight) / props.dataParams.steps;\n          const step = d[props.dataParams.stepValue] + 1;\n          return d[props.dataParams.index] ? (step ? step * stepSize + 'px' : stepSize + 'px') : stepSize + 'px';\n        })\n        .style('width', xScale.bandwidth() + 'px')\n        .style('background', d => {\n          const val = parseFloat(d[props.dataParams.index]);\n          return (val !== null) && !(isNaN(val)) ? colorScale(val) : props.baseColor;\n        });\n\n      bars.exit()\n        .transition(transition)\n        .attr('height', 0)\n        .remove();\n\n      // add axis\n      let markDates = props.markDates ? \n        props.markDates.map(d => {\n          if (xScale(dateParse(d))) {\n            return dateParse(d);\n          } \n        }) : [dateSeries[0], dateSeries.slice(-1)[0]];\n\n      markDates = markDates.filter(d => !isNaN(d));\n\n      // console.log(xScale(dateParse('2020-07-07')));\n      if (props.axis) {\n        const xAxis = chartDiv.appendSelect('svg')\n          .attr('width', width - props.margin.left - props.margin.right)\n          .attr('height', 25)\n          .attr('transform', 'translate(0, 0)');\n\n        xAxis.appendSelect('g.axis-x')\n          .attr('class', 'axis-x axis')\n          .transition(transition)\n          .attr('transform', 'translate(0,0)')\n          .call(\n            d3.axisBottom(xScale)\n              .tickValues(markDates)\n              .tickFormat(dateFormat)\n          );\n      }\n\n      // chart legend\n      if (props.legendItems) {\n        const indexLegendItems = [];\n        (Object.keys(props.legendItems.indexLegend)).forEach(d => {\n          const item = {\n            key: d,\n            value: props.legendItems.indexLegend[d],\n          };\n          indexLegendItems.push(item);\n        });\n        if (props.legendItems.null) {\n          indexLegendItems.push({\n            key: 'null',\n            value: props.legendItems.null,\n          });\n        }\n        const legendWidth = (width - props.margin.right - props.margin.left) / indexLegendItems.length;\n\n        // make legend\n        const legendDiv = chartDiv.appendSelect('div.legend-container');\n\n        const indexLegend = legendDiv.appendSelect('div.legend.indexLegend')\n        // .style('align-items', `${props.valign}`)\n          .selectAll('.legend-item')\n          .data(indexLegendItems); // for smooth data updation\n\n        indexLegend.enter().append('div')\n          .attr('class', 'legend-item')\n          .styles({\n            display: 'flex',\n            'align-items': 'start',\n          })\n        // .style('width', `${legendWidth}px`)\n          .html(d => {\n            const color = (+d.key !== null) && !(isNaN(+d.key)) ? props.stripColor[+d.key] : props.baseColor;\n            return `<span style=\"width:1rem; height:1rem;min-width:1rem; min-height:1rem; background: ${color}\"></span> <p style=\"margin:0 0 0 0.5rem;\">${d.value}</p>`;\n          })\n          .merge(indexLegend)\n          .styles({\n            display: 'flex',\n            'align-items': 'start',\n          })\n          .style('width', `${legendWidth}px`)\n          .html(d => {\n            const color = (+d.key !== null) && !(isNaN(+d.key)) ? props.stripColor[+d.key] : props.baseColor;\n            return `<span style=\"width:1rem; height:1rem;min-width:1rem; min-height:1rem; background: ${color}\"></span> <p style=\"margin:0 0 0 0.5rem;\">${d.value}</p>`;\n          });\n\n        indexLegend.exit()\n          .transition(transition)\n          .remove();\n\n        if (props.legendItems.stepLegend) {\n          // step legend stuff\n          const stepLegendItems = [];\n          (Object.keys(props.legendItems.stepLegend)).forEach(d => {\n            const item = {\n              key: d,\n              value: props.legendItems.stepLegend[d],\n            };\n            stepLegendItems.push(item);\n          });\n          console.log(stepLegendItems);\n\n          const stepLegend = legendDiv.appendSelect('div.legend.stepLegend')\n            .selectAll('.legend-item')\n            .data(stepLegendItems); // for smooth data updation\n\n          stepLegend.enter().append('div')\n            .attr('class', 'legend-item')\n            .styles({\n              display: 'flex',\n              'align-items': 'center',\n            })\n            .html((d, i) => {\n              const stepSize = (stripheight) / stepLegendItems.length;\n              return `<span style=\"width:${8}px; height:${((+d.key) + 1) * stepSize}px; background-color:${props.baseColor};\"></span><p style=\"margin:0 0 0 0.5rem;\">${d.value}</p>`;\n            })\n            .merge(stepLegend)\n            .styles({\n              display: 'flex',\n              'align-items': 'center',\n            })\n            .html((d, i) => {\n              const stepSize = (stripheight) / stepLegendItems.length;\n              return `<span style=\"width:${8}px; height:${((+d.key) + 1) * stepSize}px; background-color:${props.baseColor};\"></span><p style=\"margin:0 0 0 0.5rem;\">${d.value}</p>`;\n            });\n\n          stepLegend.exit()\n            .transition(transition)\n            .remove();\n        }\n      }\n      return this;\n    }\n}\n// console.log(this.defaultProps);\nexport default CountryLockdownIndicatorStrips;\n"]},"metadata":{},"sourceType":"module"}