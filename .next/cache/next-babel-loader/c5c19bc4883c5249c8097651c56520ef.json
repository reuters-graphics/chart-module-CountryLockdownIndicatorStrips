{"ast":null,"code":"function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport ChartComponent from './base/ChartComponent';\nimport d3 from './utils/d3';\nimport defaultData from './defaultData.json';\nimport AtlasMetadataClient from '@reuters-graphics/graphics-atlas-client';\nconst atlastClient = new AtlasMetadataClient();\n\nclass CountryLockdownIndicatorStrips extends ChartComponent {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"defaultProps\", {\n      locale: 'en',\n      // see docs on https://github.com/reuters-graphics/graphics-atlas-client\n      countryISO2: 'IN',\n      stroke: '#aaa',\n      strokeWidth: 1,\n      fill: 'steelblue',\n      height: 200\n    });\n\n    _defineProperty(this, \"defaultData\", defaultData);\n  }\n\n  draw() {\n    const data = this.data();\n    const props = this.props();\n    const node = this.selection().node();\n    props.country = atlastClient.getCountry(props.countryISO2); // console.log(props);\n\n    const {\n      width\n    } = node.getBoundingClientRect();\n    const transition = d3.transition().duration(750);\n    const g = this.selection().appendSelect('svg') // see docs in ./utils/d3.js\n    .attr('width', width).attr('height', props.height).appendSelect('g'); // .attr('transform', `translate(${width / 2 - 60}, 0)`);\n\n    const circles = g.selectAll('circle').data(data, (d, i) => i);\n    circles.style('fill', props.fill).style('stroke', props.stroke);\n    circles.enter().append('circle').style('fill', props.fill).style('stroke', props.stroke).style('stroke-width', props.strokeWidth).attr('cy', props.height / 2).attr('cx', (d, i) => data.slice(0, i).reduce((a, b) => a + b, 0) + d / 2).merge(circles).transition(transition).attr('cx', (d, i) => data.slice(0, i).reduce((a, b) => a + b, 0) + d / 2).attr('r', d => d / 2);\n    circles.exit().transition(transition).attr('r', 0).remove();\n    return this;\n  }\n\n} // console.log(this.defaultProps);\n\n\nexport default CountryLockdownIndicatorStrips;","map":{"version":3,"sources":["/Users/prasanta/ReutersWork/INTERACTIVES/COVID-APP/chart-module-CountryLockdownIndicatorStrips/src/lib/chart.js"],"names":["ChartComponent","d3","defaultData","AtlasMetadataClient","atlastClient","CountryLockdownIndicatorStrips","locale","countryISO2","stroke","strokeWidth","fill","height","draw","data","props","node","selection","country","getCountry","width","getBoundingClientRect","transition","duration","g","appendSelect","attr","circles","selectAll","d","i","style","enter","append","slice","reduce","a","b","merge","exit","remove"],"mappings":"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","sourcesContent":["import ChartComponent from './base/ChartComponent';\nimport d3 from './utils/d3';\nimport defaultData from './defaultData.json';\n\nimport AtlasMetadataClient from '@reuters-graphics/graphics-atlas-client';\nconst atlastClient = new AtlasMetadataClient();\n\nclass CountryLockdownIndicatorStrips extends ChartComponent {\n  defaultProps = {\n    locale: 'en', // see docs on https://github.com/reuters-graphics/graphics-atlas-client\n    countryISO2: 'IN',\n    stroke: '#aaa',\n    strokeWidth: 1,\n    fill: 'steelblue',\n    height: 200,\n  };\n\n  defaultData = defaultData;\n\n\n\n  draw() {\n    const data = this.data();\n    const props = this.props();\n    const node = this.selection().node();\n\n    props.country = atlastClient.getCountry(props.countryISO2);\n    // console.log(props);\n\n    const { width } = node.getBoundingClientRect();\n\n    const transition = d3.transition()\n      .duration(750);\n\n    const g = this.selection()\n      .appendSelect('svg') // see docs in ./utils/d3.js\n      .attr('width', width)\n      .attr('height', props.height)\n      .appendSelect('g')\n      // .attr('transform', `translate(${width / 2 - 60}, 0)`);\n\n    const circles = g.selectAll('circle')\n      .data(data, (d, i) => i);\n\n    circles\n      .style('fill', props.fill)\n      .style('stroke', props.stroke);\n\n    circles.enter().append('circle')\n      .style('fill', props.fill)\n      .style('stroke', props.stroke)\n      .style('stroke-width', props.strokeWidth)\n      .attr('cy', props.height / 2)\n      .attr('cx', (d, i) =>\n        data.slice(0, i).reduce((a, b) => a + b, 0) + (d / 2)\n      )\n      .merge(circles)\n      .transition(transition)\n      .attr('cx', (d, i) =>\n        data.slice(0, i).reduce((a, b) => a + b, 0) + (d / 2)\n      )\n      .attr('r', d => d / 2);\n\n    circles.exit()\n      .transition(transition)\n      .attr('r', 0)\n      .remove();\n\n    return this;\n  }\n}\n// console.log(this.defaultProps);\nexport default CountryLockdownIndicatorStrips;\n"]},"metadata":{},"sourceType":"module"}